<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <meta name="description" content="This is a free-to-use tool to put your webcam video on your desktop." />
    <meta name="author" content="pxi.gmbh" />
    <title>pipfy</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="icon" href="favicon.ico" type="image/x-icon">

    <!-- while in DEV, separate styling concerns into stylesheets -->
    <link rel="stylesheet" href="styles/reset.css">
    <link rel="stylesheet" href="styles/global.css">
    <link rel="stylesheet" href="styles/helper.css">
    <link rel="stylesheet" href="styles/app.css">

  </head>
  <body>
    <section>
      <video id="outputvideo" autoplay>
      </video>

      <canvas id="canvas" width="640" height="480"></canvas>

      <video id="inputvideo" autoplay>
      </video>
    </section>

    <section>
      <button class="capture button--secondary" type="button" name="start" onclick="captureVideo()">create floating webcam video</button>
      <a href="captions.html" class="capture button--secondary" type="button" name="start">create floating captions feed</a>
      <button class="pip button--secondary" type="button" name="pip" onclick="pipClick()">float video <sup>*</sup></button>
      <button class="mirrorChange button--secondary" type="button" name="pip" onclick="toggleMirror(!isMirror)">
        <span class="toMirror"> flip video </span>
        <span class="toNormal"> reset flip </span>
      </button>
      <br><br>
      <div class="cropping-ui">
        <p lang="en">*bug: <strong>right click</strong> on the video to enable <strong>picture in picture</strong>.</p>
        <button class="button--secondary button--size active" type="button" name="button" onclick="setCanvasSize(640,360)">16:9</button>
        <button class="button--secondary button--size active" type="button" name="button" onclick="setCanvasSize(640,480)">4:3</button>
        <button class="button--secondary button--size active" type="button" name="button" onclick="setCanvasSize(360,480)">3:4</button>
        <button class="button--secondary button--size active" type="button" name="button" onclick="setCanvasSize(360,360)">1:1</button>
        <button class="button--secondary button--size active" type="button" name="button" onclick="let custom=prompt('enter width and height, separated by a comma, e.g. 200,300').split(',');setCanvasSize(custom[0],custom[1])">custom</button>
        <br>
        <input id="moveCropX" type="range" name="" value="50" min="0" max="100" onmouseup="moveCanvasX(this.value)">
        <input id="moveCropY" type="range" name="" value="50" min="0" max="100" onmouseup="moveCanvasY(this.value)">
      </div>
    </section>

    <footer>
      <div class="intro">
      </div>
      <section id="about" class="is-modal">
        <button class="button--primary" onclick="toggleAbout();">
          <span lang="en">close</span>
        </button>
        <div lang="en">
          <h3>how to use</h3>
          <p><strong>pipfy.video</strong> can help you put a video image of yourself on your desktop. helpful for screen recordings and screen sharing in video conferencing software. no app download needed. just click <strong>capture video</strong> and grant your browser permission to access the camera. there is no server involved: the feed is only running on your computer.</p>
          <p>thanks to the <strong>picture-in-picture</strong> browser technology you can arrange your video on your screen right along the software or presentation you want to share. the video will float above all other windows. even above a presentation running in full screen, if you enable the hover effect after starting presentation mode.</p>
          <p>you can flip the image so the video works like a mirror. this should help orient yourself to interact with things on your screen. it makes pointing at things with your video image much easier.</p>
          <p>you can crop the webcam to arrange the windows on your desktop in a helpful setup. we prefer to use our webcam in portrait mode to give more room to other elements on the screen.</p>
          <p>you can run several instances in seperate browser tabs. you will need to connect multiple webcams. this way you could put a speaker and a sign language translator on the desktop in a live recording or streaming session.</p>
          <p><strong>browser quirks:</strong> this uses quite recent browser technology. not all browsers behave as expected. <strong>do not run the camera in an inactive browser tab</strong> to keep the feed running smoothly. instead use a single, open browser window for each instance. the window does not need to be in focus, but it should not be minimized. works best in google chrome.</p>
          <hr>
          <p><a href="./captions.html"><strong>pipfy.captions</strong></a> is an accessibility hack to create a captioning feed of your audio input. only works in google chrome. it uses the google speech-to-text API to generate automatic subtitles.</p>
          <p>you can create a floating subtitle bar that hovers over active windows on your desktop. adjust the bar and text to your needs. if you switch languages you may have to restart the process for the API to understand you.</p>
          <p>you can also share your subtitles as a live feed to a private peer-to-peer session so that others may read in their browser what you are saying.</p>
          <p>reroute audio in your operating system (or use <a href="https://vb-audio.com/Cable/">a virtual cable</a>) to create subtitles for any sound source on your computer.</p>
          <p>exporting the text (with time stamps) is currently disabled. you can enable it, if you know HTML and CSS or wait for us to improve usability.</p>
          <p>automatic captioning is at best 90% accurate and it works only 90% of the time. please adjust your expectations. also the API is a bit finicky. we'll do what we can to improve the usability on our end, but ultimately we rely on a third party API to improve accuracy over time. as for privacy: we encrypt the text end-to-end, but the speech recognition happens on google servers.</p>
          <hr>
          <p>thanks. practice solidarity, stay positive. you got this.</p>
          <p>made with lots of care but too little time from your friendly design lab at <a src="https://agentur.pxi.gmbh"><strong>pxi</strong>|lab<a> (currently in german only).</p>
        </div>
      </section>
      <button class="button--primary" onclick="toggleAbout();">
        <span lang="en">how to use</span>
      </button>
      <div id="imprint">
        <p lang="en">free. <a href="https://github.com/pxi-gmbh/pipfy">open source</a>. by <a href="https://agentur.pxi.gmbh/"><strong>pxi</strong>‚ùòagentur</a> (imprint).</p>
        <br>related: <a href="https://slidenotes.io">put presentations in your browser</a>. please give it a try.</p>
      </div>
    </footer>

  </body>

  <script type="text/javascript" src="pipfy.js"></script>
  <script type="text/javascript" src="help.js"></script>
</html>
